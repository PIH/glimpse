<pipeline>

    <dataSources>
        <dataSource name="openmrs" serverName="localhost" port="3306" databaseName="openmrs_neno" user="root" password="root"/>
        <dataSource name="datawarehouse" serverName="localhost" port="3306" databaseName="datawarehouse" user="root" password="root"/>
    </dataSources>

    <flow id="patient-etl">
        <extract dataSource="openmrs" sqlFile="extract-patients.sql"/>
        <transforms>
            <metadataTransform column="cause_of_death" metadata="concept"/>
        </transforms>
        <load dataSource="datawarehouse" table="patient" key="uuid"/>
    </flow>

    <flow id="preferred-name-etl">
        <extract dataSource="openmrs" sqlFile="extract-preferred-names.sql"/>
        <transforms>
            <metadataTransform column="cause_of_death" metadata="concept"/>
        </transforms>
        <load dataSource="datawarehouse" table="patient" key="patient_uuid"/>
    </flow>


</pipeline>